<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rizin & You — Our Story</title>
  <style>
    :root{
      --bg1:#0f172a; /* deep navy */
      --bg2:#071133; /* darker */
      --accent:#ff6b81;
      --muted:#94a3b8;
      --card: rgba(255,255,255,0.03);
      --glass: rgba(255,255,255,0.04);
      --font-sans: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:var(--font-sans); color:#e6eef8; background: radial-gradient(1200px 600px at 10% 10%, rgba(255,107,129,0.06), transparent), linear-gradient(180deg,var(--bg1), var(--bg2));
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; align-items:center; justify-content:center; padding:32px;
    }
    .container{
      width:100%; max-width:960px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:18px; padding:28px; box-shadow: 0 10px 40px rgba(2,6,23,0.6);
      position:relative; overflow:hidden; border:1px solid rgba(255,255,255,0.04);
    }
    header{
      display:flex; gap:16px; align-items:center; margin-bottom:18px;
    }
    .logo{
      width:64px; height:64px; border-radius:12px; background:linear-gradient(135deg,var(--accent), #7c5cff); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:22px; color:white; box-shadow:0 6px 18px rgba(111,66,193,0.18);
    }
    h1{font-size:20px; margin:0}
    p.lead{margin:0; color:var(--muted); font-size:13px}

    .stage{
      display:grid; grid-template-columns: 1fr 360px; gap:20px; align-items:start;
    }
    @media (max-width:900px){.stage{grid-template-columns:1fr;}}

    .card{background:var(--card); padding:18px; border-radius:12px; min-height:360px; position:relative; overflow:hidden}
    .story-viewport{height:100%; display:flex; flex-direction:column; gap:12px; align-items:flex-start; justify-content:center}

    /* typewriter lines */
    .line{font-size:18px; line-height:1.4; opacity:0; transform:translateY(12px);}
    .line .highlight{color:var(--accent); font-weight:700}

    /* right column */
    .side{
      padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent); height:100%; display:flex; flex-direction:column; gap:12px; align-items:stretch; justify-content:flex-start;
    }

    .big-heart{font-size:80px; text-align:center; margin-top:8px; opacity:0.08}

    .controls{display:flex; gap:8px; margin-top:10px}
    button{
      cursor:pointer; border:0; padding:10px 14px; border-radius:10px; font-weight:600; background:linear-gradient(90deg,var(--accent), #7c5cff); color:white; box-shadow: 0 6px 18px rgba(124,92,255,0.16);
    }
    button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); box-shadow:none}

    .meta{font-size:13px; color:var(--muted); padding:10px; border-radius:8px; background:var(--glass)}

    /* small decorative stars */
    .stars{position:absolute; inset:0; pointer-events:none}
    .star{position:absolute; width:6px; height:6px; background:rgba(255,255,255,0.06); border-radius:50%; transform:scale(0.6);}

    /* animation classes for JS to toggle */
    .show{opacity:1; transform:none; transition:opacity 600ms ease, transform 600ms cubic-bezier(.2,.9,.2,1)}
    .fade-in{opacity:1; transform:none; transition:opacity 500ms ease, transform 500ms ease}

    .caption{font-size:13px; color:var(--muted)}

    /* small progress bar */
    .progress{height:8px; background:rgba(255,255,255,0.03); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg,#ffd6e0, var(--accent)); transition:width 600ms linear}

    /* confetti canvas */
    #confetti{position:absolute; inset:0; pointer-events:none}

    footer{margin-top:14px; display:flex; justify-content:space-between; align-items:center}

    /* small mobile adjustments */
    @media (max-width:520px){.logo{width:54px;height:54px;font-size:18px}.side{padding:12px}.card{padding:12px}}
  </style>
</head>
<body>
  <div class="container" role="main">
    <div class="stars" aria-hidden>
      <!-- a few random stars positioned by JS -->
    </div>
    <canvas id="confetti" width="800" height="600"></canvas>

    <header>
      <div class="logo">RZ</div>
      <div>
        <h1>Rizin & You — Our Story</h1>
        <p class="lead">A short animated webpage that types your love story — press the button to begin.</p>
      </div>
    </header>

    <div class="stage">
      <div class="card">
        <div class="story-viewport" id="viewport">
          <!-- lines will be injected here -->
          <div class="meta">Press <strong>Start Story</strong> to begin the animation.</div>
        </div>
      </div>

      <aside class="side">
        <div style="display:flex;align-items:center;gap:12px;">
          <div style="flex:1">
            <div class="caption">Started</div>
            <div style="font-weight:800">3 Aug 2025 — Committed Relationship</div>
          </div>
          <div class="big-heart">❤️</div>
        </div>

        <div class="controls">
          <button id="start">Start Story</button>
          <button id="replay" class="ghost">Replay</button>
        </div>

        <div class="meta">Tip: We'll animate each sentence with a gentle typewriter and fade. You can replay anytime.</div>

        <div style="margin-top:auto">
          <div class="caption">Progress</div>
          <div class="progress"><i id="bar"></i></div>
        </div>
      </aside>
    </div>

    <footer>
      <div class="caption">Made with ❤️ — Press start to see the story unfold</div>
      <div class="caption">Rizin, this one's for you.</div>
    </footer>
  </div>

  <script>
    // Story lines (keeps your original phrasing; split to small readable chunks)
    const lines = [
      "We met for the first time in a workshop of RCRIC.",
      "That day she fell for me first, but I didn’t know about it at that time.",
      "After this she approached me and tried to be friendly with me.",
      "We became best friends. We flirted with each other during our best friend period.",
      "I was afraid of falling in love because I got betrayed several times... but I opened up to her.",
      "I shared my story with her. She consoled me and accepted all my sorrows.",
      "She made me realize that I can fall in love again — fall in love for the last time with her.",
      "I fell for her slowly. I saw the kindness and beauty of her eyes.",
      "She accepted me just as myself. We did our first date as best friends and kissed for the first time.",
      "I was holding her close to my chest — that time I realized that I want to hold her forever.",
      "For her I left my habit of smoking because she didn’t like it.",
      "For her I got a better view of the future. I determined to be successful so that I can marry her.",
      "We entered into a committed relationship on 3rd August 2025. Our story begins that day and continues forever.",
      "She changed my life. And I am happy with her.",
      "At last I want to say: Rizin my dear, I love you so much. Keep believing in me.",
      "I promise I will make you happy in the future and you will not regret choosing me as your life partner."
    ];

    const viewport = document.getElementById('viewport');
    const startBtn = document.getElementById('start');
    const replayBtn = document.getElementById('replay');
    const bar = document.getElementById('bar');
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');

    // responsive canvas
    function fitCanvas(){
      confettiCanvas.width = confettiCanvas.clientWidth || confettiCanvas.offsetWidth || 800;
      confettiCanvas.height = confettiCanvas.clientHeight || confettiCanvas.offsetHeight || 600;
    }
    window.addEventListener('resize', fitCanvas);
    fitCanvas();

    // create a few decorative stars randomly
    (function makeStars(){
      const container = document.querySelector('.stars');
      for(let i=0;i<22;i++){
        const s = document.createElement('span');
        s.className='star';
        s.style.left = Math.random()*100+'%';
        s.style.top = Math.random()*100+'%';
        s.style.width = (4+Math.random()*8)+'px';
        s.style.height = s.style.width;
        s.style.opacity = (0.02+Math.random()*0.12);
        container.appendChild(s);
      }
    })();

    // simple typewriter function returning a Promise
    function typeText(el, text, speed=18){
      return new Promise(resolve=>{
        el.textContent = '';
        let i=0;
        function step(){
          if(i<=text.length){
            el.textContent = text.slice(0,i);
            i++;
            setTimeout(step, speed + Math.random()*8);
          } else {
            resolve();
          }
        }
        step();
      });
    }

    // animate the lines sequentially
    async function playStory(){
      startBtn.disabled = true; replayBtn.disabled = true;
      viewport.innerHTML = '';
      bar.style.width = '0%';

      // create elements for each line but keep them hidden
      const elems = lines.map((t,i)=>{
        const div = document.createElement('div');
        div.className = 'line';
        div.style.transitionDelay = (i*80)+'ms';
        viewport.appendChild(div);
        return div;
      });

      // ensure the viewport is scrolled to top before starting
      viewport.scrollTop = 0;

      // step through each line
      for(let i=0;i<elems.length;i++){
        const el = elems[i];
        // animate in
        requestAnimationFrame(()=>{
          el.classList.add('show');
        });
        // type text
        await typeText(el, lines[i], 20);
        // after typing, make sure the newest line is visible
        el.scrollIntoView({behavior:'smooth', block:'end'});
        // small pause after each line
        await new Promise(r=>setTimeout(r, 450));
        // update progress
        const pct = Math.round(((i+1)/elems.length)*100);
        bar.style.width = pct+'%';
        // small highlight effect
        el.animate([{transform:'scale(1.01)'},{transform:'scale(1)'}],{duration:280, easing:'ease-out'});
      }

      // final flourish
      startConfetti();
      replayBtn.disabled = false; startBtn.disabled = false;
    }

    // replay functionality
    replayBtn.addEventListener('click', ()=>{
      stopConfetti();
      playStory();
    });

    startBtn.addEventListener('click', ()=>{
      stopConfetti();
      playStory();
    });

    // Simple confetti implementation
    let confettiPieces = [];
    let confettiAnim;
    function rand(min,max){return Math.random()*(max-min)+min}
    function startConfetti(){
      confettiPieces = [];
      const count = 80;
      for(let i=0;i<count;i++){
        confettiPieces.push({
          x: rand(0, confettiCanvas.width),
          y: rand(-confettiCanvas.height, 0),
          r: rand(4,10),
          d: rand(10,30),
          tilt: rand(-15,15),
          color: ['#ffd6e0','#ff9dbb','#FFD89B','#B29CFF'][Math.floor(rand(0,4))],
          tiltAngleIncrement: rand(0.05,0.12),
          tiltAngle:0
        });
      }
      cancelAnimationFrame(confettiAnim);
      (function run(){
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        confettiPieces.forEach(p=>{
          p.tiltAngle += p.tiltAngleIncrement;
          p.y += Math.cos(p.d) + 1 + p.r/8;
          p.x += Math.sin(0.01*p.d);
          p.tilt = Math.sin(p.tiltAngle) * 12;

          ctx.beginPath();
          ctx.moveTo(p.x + p.tilt + p.r/2, p.y);
          ctx.lineTo(p.x + p.tilt, p.y + p.r);
          ctx.lineTo(p.x + p.tilt - p.r/2, p.y);
          ctx.closePath();
          ctx.fillStyle = p.color;
          ctx.fill();
        });
        confettiAnim = requestAnimationFrame(run);
      })();

      // stop after a while
      setTimeout(stopConfetti, 6000);
    }
    function stopConfetti(){
      cancelAnimationFrame(confettiAnim);
      ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    }

    // make it keyboard accessible (Enter on start)
    startBtn.addEventListener('keyup', (e)=>{ if(e.key==='Enter') startBtn.click(); });

    // small accessibility focus
    startBtn.addEventListener('keydown', (e)=>{ if(e.key===' '){ e.preventDefault(); startBtn.click(); } });

    // initial prefill of viewport with soft intro
    (function intro(){
      viewport.innerHTML = '<div class="meta">This page holds a personal love story — press start when you are ready.</div>';
    })();
  </script>
</body>
</html>
